{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}

{% block body %}
    <h1>Bienvenue {{ user.firstname }}</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Prénom</th>
                <td>{{ user.firstname }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ user.lastname }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            {# <tr>
                <th>Password</th>
                <td>{{ user.password }}</td>
            </tr> #}
        </tbody>
    </table>

    <a href="{{ path('user_edit', {'id': user.id}) }}">Modifer les informations de mon compte</a>
    </br>

    <div class="row races">
        {% for race in user.races %}
            <div class="card" style="width: 25%;">
                <img class="card-img-top" src="{{ race.event.type.image }}" alt="Card image type">
                <div class="card-body">
                    <h3>{{ race.event.name }}</h3> - <h6>le {{ race.date|date("d/m/Y") }} à {{ race.event.city }}</h6>
                    <h5>{{ race.name }}</h5>
                    -----------------------
                    <div class="race-details">
                        <h6><strong>Détails de la course :</strong></h6>
                        <ul>
                            {% if race.event.type.name != "Triathlon" %}
                                <li>Distance totale : {{ race.totalDistance?race.totalDistance:"/" }} km</li>
                            {% endif %}

                            {% if race.event.type.name == "Triathlon" %}
                                <li>Distance natation : {{ race.swimDistance?race.swimDistance:"/" }} m</li>
                                <li>Distance vélo : {{ race.bikeDistance?race.bikeDistance:"/" }} km</li>
                                <li>Distance course à pied : {{ race.runDistance?race.runDistance:"/" }} km</li>
                            {% endif %}

                            <li>Temps total : {{ race.totalTime?race.totalTime|date('H:i:s'):"/" }}</li>

                            {% if race.event.type.name == "Triathlon" %}
                                <li>Temps natation : {{ race.swimTime?race.swimTime|date('H:i:s'):"/" }}</li>
                                <li>Temps vélo : {{ race.bikeTime?race.bikeTime|date('H:i:s'):"/" }}</li>
                                <li>Temps course à pied : {{ race.runTime?race.runTime|date('H:i:s'):"/" }}</li>
                            {% endif %}

                            {% if race.event.type.name == "Trail" %}
                                <li>Dénivelé positif : {{ race.verticalGain?race.verticalGain:"/" }} m</li>
                            {% endif %}
                            - - - - - 
                            <li>Prix de l'inscription : {{ race.price }}€</li>
                        </ul>
                    </div>
                    -----------------------
                    <div class="race-result">
                        <p><strong>Résultat :</strong></p>
                        <ul>
                            <li><strong>Classement général : {{ race.ranking }}</strong> / {{ race.totalFinisher }}</li>
                            <li>Pourcentage de finishers : {{ race.percentFinisher }} %</li>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    




    <a class="btn btn-success" href="{{ path('race_new') }}" role="button">Ajouter une nouvelle course</a>
    </br>
    <a href="{{ path('user_index') }}">Retour à l'accueil</a>

    {{ include('user/_delete_form.html.twig') }}
{% endblock %}
